'use strict';(function(a){var b=null;a(function(){a('.woosb-wrap').length&&a('.woosb-wrap').each(function(){woosb_init(a(this),'ready')})}),a(document).on('woosq_loaded',function(){woosb_init(a('#woosq-popup .woosb-wrap'),'woosq')}),a(document).on('woovr_selected',function(n,c,f){var k=f.closest('.woosb-wrap'),b=f.closest('.woosb-product'),g,h,i,j,e,l,m,d;b.length&&(g=c.attr('data-id'),h=c.attr('data-price'),i=c.attr('data-regular-price'),j=c.attr('data-pricehtml'),e=c.attr('data-imagesrc'),l=c.attr('data-purchasable'),m=c.attr('data-attrs'),d=c.attr('data-availability'),l==='yes'&&g>=0?(b.attr('data-id',g),b.attr('data-price',h),woosb_change_price(b,h,i,j),b.attr('data-attrs',m.replace(/\/$/,''))):(b.attr('data-id',0),b.attr('data-price',0),b.attr('data-attrs',''),b.find('.woosb-price-ori').show(),b.find('.woosb-price-new').html('').hide()),e&&e!==''?(b.find('.woosb-thumb-ori').hide(),b.find('.woosb-thumb-new').html('<img src="'+e+'"/>').show()):(b.find('.woosb-thumb-ori').show(),b.find('.woosb-thumb-new').html('').hide()),d&&d!==''?b.find('.woosb-availability').html(d).show():b.find('.woosb-availability').html('').hide(),typeof wc_reset_content=='function'&&(a('.product_meta .sku').wc_reset_content(),a('.product_weight, .woocommerce-product-attributes-item--weight .woocommerce-product-attributes-item__value').wc_reset_content(),a('.product_dimensions, .woocommerce-product-attributes-item--dimensions .woocommerce-product-attributes-item__value').wc_reset_content())),woosb_init(k,'woovr_selected')}),a(document).on('found_variation',function(d,b){var e=a(d.target).closest('.woosb-wrap'),c=a(d.target).closest('.woosb-product'),f;c.length&&(b.woosb_image!==void 0&&b.woosb_image!==''?(c.find('.woosb-thumb-ori').hide(),c.find('.woosb-thumb-new').html(b.woosb_image).show()):(c.find('.woosb-thumb-ori').show(),c.find('.woosb-thumb-new').html('').hide()),b.price_html!==void 0&&b.price_html!==''&&b.display_price!==void 0&&b.display_price!==''&&woosb_change_price(c,b.display_price,b.display_regular_price,b.price_html),b.variation_description!==void 0?c.find('.woosb-variation-description').html(b.variation_description).show():c.find('.woosb-variation-description').html('').hide(),b.is_purchasable&&(woosb_vars.bundled_price_from==='regular_price'&&b.display_regular_price!==void 0?c.attr('data-price',b.display_regular_price):c.attr('data-price',b.display_price),b.is_in_stock?(e.next('p.stock').show(),c.attr('data-id',b.variation_id)):(e.next('p.stock').hide(),c.attr('data-id',0)),b.availability_html&&b.availability_html!==''?c.find('.woosb-availability').html(b.availability_html).show():c.find('.woosb-availability').html('').hide(),f={},c.find('select[name^="attribute_"]').each(function(){var b=a(this).attr('name');f[b]=a(this).val()}),c.attr('data-attrs',JSON.stringify(f))),woosb_vars.change_image==='no'&&a(d.target).closest('.variations_form').trigger('reset_image'),typeof wc_reset_content=='function'&&(a('.product_meta .sku').wc_reset_content(),a('.product_weight, .woocommerce-product-attributes-item--weight .woocommerce-product-attributes-item__value').wc_reset_content(),a('.product_dimensions, .woocommerce-product-attributes-item--dimensions .woocommerce-product-attributes-item__value').wc_reset_content()),a(document).trigger('woosb_found_variation',[c,b]),woosb_init(e,'found_variation'))}),a(document).on('reset_data',function(c){var d=a(c.target).closest('.woosb-wrap'),b=a(c.target).closest('.woosb-product');b.length&&(b.find('.woosb-thumb-new').hide(),b.find('.woosb-thumb-ori').show(),b.find('.woosb-price-new').hide(),b.find('.woosb-price-ori').show(),b.find('.woosb-availability').html('').hide(),b.find('.woosb-variation-description').html('').hide(),b.attr('data-id',0),b.attr('data-price',0),b.attr('data-attrs',''),a(document).trigger('woosb_reset_data',[b]),woosb_init(d,'reset_data'))}),a(document).on('click touch','.woosb-quantity-input-plus, .woosb-quantity-input-minus',function(){var b=a(this).closest('.woosb-quantity').find('.woosb-qty'),c,e,f,d;b.length||(b=a(this).closest('.woosb-quantity').find('.qty')),c=parseFloat(b.val()),e=parseFloat(b.attr('max')),f=parseFloat(b.attr('min')),d=b.attr('step'),(!c||c===''||c==='NaN')&&(c=0),(e===''||e==='NaN')&&(e=''),(f===''||f==='NaN')&&(f=0),d==='any'||d===''||d===void 0||parseFloat(d)==='NaN'?d=1:d=parseFloat(d),a(this).is('.woosb-quantity-input-plus')?e&&(e==c||c>e)?b.val(e):b.val((c+d).toFixed(woosb_decimal_places(d))):f&&(f==c||c<f)?b.val(f):c>0&&b.val((c-d).toFixed(woosb_decimal_places(d))),b.trigger('change')}),a(document).on('click touch','.single_add_to_cart_button',function(b){var c=a(this);c.hasClass('woosb-disabled')&&b.preventDefault()}),a('.woosb-qty').length?(a(document).on('change','.woosb-qty',function(){var b=a(this);woosb_check_qty(b)}),a(document).on('keyup','.woosb-qty',function(){var c=a(this);b!=null&&clearTimeout(b),b=setTimeout(woosb_check_qty,1e3,c)})):(a(document).on('change','.woosb-quantity .qty',function(){var b=a(this);woosb_check_qty(b)}),a(document).on('keyup','.woosb-quantity .qty',function(){var c=a(this);b!=null&&clearTimeout(b),b=setTimeout(woosb_check_qty,1e3,c)}))})(jQuery);function woosb_init(a,b=null){woosb_check_ready(a,b),woosb_save_ids(a,b),jQuery(document).trigger('woosb_init',[a,b])}function woosb_check_ready(e){var g=0,d=0,b=0,n=!1,z='',j=!1,y='',l=!0,p=!1,k=!1,q=!1,m=!1,w=e.attr('data-id'),a=e.find('.woosb-products'),c=e.find('.woosb-alert'),M=jQuery('.woosb-ids-'+w),J=M.closest('form.cart').find('.single_add_to_cart_button'),o=a.attr('data-price-suffix'),I=e.find('.woosb-total'),B=e.find('.woosb-count'),i=jQuery('.woosb-price-'+w),f=jQuery('.woobt-wrap-'+w),H=parseFloat(f.length?f.attr('data-total'):0),t=parseFloat(a.attr('data-discount')),r=parseFloat(a.attr('data-discount-amount')),E=a.attr('data-fixed-price')==='yes',D=a.attr('data-optional')==='yes',L=a.attr('data-variables')==='yes',K=a.attr('data-exclude-unpurchasable')==='yes',v='',F=t>0&&t<100,G=r>0,s=parseFloat(a.attr('data-min')),u=parseFloat(a.attr('data-max')),x=parseFloat(a.attr('data-total-min')),A=parseFloat(a.attr('data-total-max')),C=Math.pow(10,Number(woosb_vars.price_decimals)+1),h,N;if(!a.length||!L&&!D)return;E||(a.find('.woosb-product').each(function(){var c=jQuery(this),e,a;if(c.hasClass('woosb-product-unpurchasable')&&K)return;parseFloat(c.attr('data-price'))>0&&(e=parseFloat(c.attr('data-qty')),a=parseFloat(c.attr('data-price')),d+=woosb_round(a,woosb_vars.price_decimals)*e,!G&&F&&(a*=(100-t)/100),a=Math.round(a*C)/C,b+=woosb_round(a,woosb_vars.price_decimals)*e)}),G&&r<d?(b=d-r,v=woosb_format_price(r)):F?v=woosb_round(t,2)+'%':b=d,h=woosb_price_html(d,b),N=woosb_price_html(d+H,b+H),v!==''&&(h+=' <small class="woocommerce-price-suffix">'+woosb_vars.saved_text.replace('[d]',v)+'</small>'),I.html('<span class="woosb-total-label">'+woosb_vars.price_text+'</span> <span class="woosb-total-value">'+h+o+'</span>').slideDown(),jQuery(document).trigger('woosb_change_total',[I,h,o]),woosb_vars.change_price!=='no'&&(woosb_vars.change_price==='yes_custom'&&woosb_vars.price_selector!=null&&woosb_vars.price_selector!==''&&(i=jQuery(woosb_vars.price_selector)),f.length?i.html(N+o):(typeof i.attr('data-o_price')=='undefined'&&i.attr('data-o_price',woosb_encode_entities(i.html())),i.html(h+o))),f.length&&(f.find('.woobt-products').attr('data-product-price-html',h),f.find('.woobt-product-this').attr('data-price',b).attr('data-regular-price',d),woobt_init(f)),jQuery(document).trigger('woosb_calc_price',[b,d,h,o,e])),a.find('.woosb-product').each(function(){var a=jQuery(this);parseFloat(a.attr('data-qty'))>0&&(l=!1,g+=parseFloat(a.attr('data-qty')),parseInt(a.attr('data-id'))===0&&(n=!0,z===''&&(z=a.attr('data-name'))),a.hasClass('woosb-product-optional')&&a.hasClass('woosb-product-unpurchasable')&&(j=!0,y===''&&(y=a.attr('data-name'))))}),D&&(s>0&&g<s&&(p=!0),u>0&&g>u&&(k=!0),B.html('<span class="woosb-count-label">'+woosb_vars.selected_text+'</span> <span class="woosb-count-value">'+g+'</span>').slideDown(),jQuery(document).trigger('woosb_change_count',[B,g,s,u])),E||(x>0&&b<x&&(q=!0),A>0&&b>A&&(m=!0)),n||j||l||p||k||q||m?(J.addClass('woosb-disabled'),n?c.html(woosb_vars.alert_selection.replace('[name]','<strong>'+z+'</strong>')).slideDown():j?c.html(woosb_vars.alert_unpurchasable.replace('[name]','<strong>'+y+'</strong>')).slideDown():l?c.html(woosb_vars.alert_empty).slideDown():p?c.html(woosb_vars.alert_min.replace('[min]',s).replace('[selected]',g)).slideDown():k?c.html(woosb_vars.alert_max.replace('[max]',u).replace('[selected]',g)).slideDown():q?c.html(woosb_vars.alert_total_min.replace('[min]',woosb_format_price(x)).replace('[total]',woosb_format_price(b))).slideDown():m&&c.html(woosb_vars.alert_total_max.replace('[max]',woosb_format_price(A)).replace('[total]',woosb_format_price(b))).slideDown(),jQuery(document).trigger('woosb_check_ready',[!1,n,j,l,p,k,q,m,e])):(c.html('').slideUp(),J.removeClass('woosb-disabled'),jQuery(document).trigger('woosb_check_ready',[!0,n,j,l,p,k,q,m,e]))}function woosb_save_ids(a){var b=Array(),c=a.attr('data-id'),d=jQuery('.woosb-ids-'+c),e=a.find('.woosb-products');e.find('.woosb-product').each(function(){var c=jQuery(this),d=parseInt(c.attr('data-id')),f=c.attr('data-key'),e=parseFloat(c.attr('data-qty')),a=c.attr('data-attrs');d>0&&e>0&&(a!==void 0?a=encodeURIComponent(a):a='',b.push(d+'/'+f+'/'+e+'/'+a))}),d.val(b.join(',')),jQuery(document).trigger('woosb_save_ids',[b,a])}function woosb_check_qty(b){var h=b.closest('.woosb-wrap'),a=parseFloat(b.val()),d=parseFloat(b.attr('min')),e=parseFloat(b.attr('max')),f,c,i,g,j;(a===''||isNaN(a))&&(a=0),!isNaN(d)&&a<d&&(a=d),!isNaN(e)&&a>e&&(a=e),b.val(a),b.closest('.woosb-product').attr('data-qty',a),(woosb_vars.bundled_price==='subtotal'||woosb_vars.bundled_price==='subtotal_under_name')&&(f=h.find('.woosb-products'),c=b.closest('.woosb-product'),i=c.attr('data-price-suffix'),g=parseFloat(c.attr('data-price')),a=parseFloat(c.attr('data-qty')),c.find('.woosb-price-ori').hide(),parseFloat(f.attr('data-discount'))>0&&f.attr('data-fixed-price')==='no'?(j=woosb_round(g*(100-parseFloat(f.attr('data-discount')))/100,woosb_vars.price_decimals),c.find('.woosb-price-new').html(woosb_price_html(g*a,j*a)+i).show()):c.find('.woosb-price-new').html(woosb_price_html(g*a)+i).show()),jQuery(document).trigger('woosb_check_qty',[a,b]),woosb_init(h,'woosb_check_qty')}function woosb_change_price(b,i,d,j){var f=b.closest('.woosb-products'),g=b.attr('data-price-suffix'),h=parseFloat(b.attr('data-qty')),c='',a,e;b.find('.woosb-price-ori').hide(),woosb_vars.bundled_price==='subtotal'||woosb_vars.bundled_price==='subtotal_under_name'?(a=parseFloat(i),woosb_vars.bundled_price_from==='regular_price'&&d!==void 0&&(a=parseFloat(d)),e=a,parseFloat(f.attr('data-discount'))>0&&(e=woosb_round(a*(100-parseFloat(f.attr('data-discount')))/100,woosb_vars.price_decimals)),c=woosb_price_html(a*h,e*h)+g):parseFloat(f.attr('data-discount'))>0?(a=parseFloat(i),woosb_vars.bundled_price_from==='regular_price'&&d!==void 0&&(a=parseFloat(d)),e=woosb_round(a*(100-parseFloat(f.attr('data-discount')))/100,woosb_vars.price_decimals),c=woosb_price_html(a,e)+g):woosb_vars.bundled_price_from==='regular_price'&&d!==void 0?c=woosb_price_html(d)+g:j!==''&&(c=j),b.find('.woosb-price-new').html(c).show(),jQuery(document).trigger('woosb_change_price',[b,c])}function woosb_round(b,a){return Number(Math.round(b+'e'+a)+'e-'+a)}function woosb_format_money(c,b,f,d,g){c=c||0,b=isNaN(b=Math.abs(b))?2:b,f=f!==void 0?f:'$',d=d!==void 0?d:',',g=g!==void 0?g:'.';var h=c<0?'-':'',a=parseInt(c=Math.abs(+c||0).toFixed(b),10)+'',e=0;return a.length>3&&(e=a.length%3),woosb_vars.trim_zeros==='1'?f+h+(e?a.substr(0,e)+d:'')+a.substr(e).replace(/(\d{3})(?=\d)/g,'$1'+d)+(b&&parseFloat(c)>parseFloat(a)?g+Math.abs(c-a).toFixed(b).slice(2).replace(/(\d*?[1-9])0+$/g,'$1'):''):f+h+(e?a.substr(0,e)+d:'')+a.substr(e).replace(/(\d{3})(?=\d)/g,'$1'+d)+(b?g+Math.abs(c-a).toFixed(b).slice(2):'')}function woosb_format_price(c){var a='<span class="woocommerce-Price-amount amount">',b=woosb_format_money(c,woosb_vars.wc_price_decimals,'',woosb_vars.wc_price_thousand_separator,woosb_vars.wc_price_decimal_separator);switch(woosb_vars.wc_price_format){case'%1$s%2$s':a+='<span class="woocommerce-Price-currencySymbol">'+woosb_vars.wc_currency_symbol+'</span>'+b;break;case'%1$s %2$s':a+='<span class="woocommerce-Price-currencySymbol">'+woosb_vars.wc_currency_symbol+'</span> '+b;break;case'%2$s%1$s':a+=b+'<span class="woocommerce-Price-currencySymbol">'+woosb_vars.wc_currency_symbol+'</span>';break;case'%2$s %1$s':a+=b+' <span class="woocommerce-Price-currencySymbol">'+woosb_vars.wc_currency_symbol+'</span>';break;default:a+='<span class="woocommerce-Price-currencySymbol">'+woosb_vars.wc_currency_symbol+'</span> '+b}return a+='</span>',a}function woosb_price_html(a,c){var b='';return parseFloat(woosb_round(c,woosb_vars.wc_price_decimals))<parseFloat(woosb_round(a,woosb_vars.wc_price_decimals))?b='<del>'+woosb_format_price(a)+'</del> <ins>'+woosb_format_price(c)+'</ins>':b=woosb_format_price(a),b}function woosb_decimal_places(b){var a=(''+b).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return a?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0}function woosb_encode_entities(a){return String(a).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')}function woosb_decode_entities(b){var a=document.createElement('textarea');return a.innerHTML=b,a.value}